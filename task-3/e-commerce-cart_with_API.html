<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Techno BaZzzar â€“ A Dynamic E-Commerce Card System! ðŸ›’</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <style>
        body {
            background-image: url("https://files.oaiusercontent.com/file-8BS9J8dyJm6UzzL53j6aBD?se=2025-02-22T06%3A27%3A37Z&sp=r&sv=2024-08-04&sr=b&rscc=max-age%3D604800%2C%20immutable%2C%20private&rscd=attachment%3B%20filename%3Dae7c731c-b3f6-4052-900d-395c4808d08e.webp&sig=zGj0rZmQ2aoTKCrbqDpv0k%2BrA5AA9JI9T3WUGkP1Izs%3D");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
        }


        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.178);
        }

        .main-content {
            position: relative;
            z-index: 1;
            padding: 20px;
            max-width: 1200px;
            margin: auto;
        }


        .card {
            background-color: #121212;
            color: #E0E0E0;
            border-radius: 12px;
            padding: 10px;
            box-shadow: 0 4px 10px rgba(255, 255, 255, 0.1);
            transition: 0.3s ease-in-out;
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: 100%;
        }

        .card:hover {
            box-shadow: 0 6px 15px rgba(255, 255, 255, 0.3);
            transform: translateY(-5px);
        }

        .card-img-top {
            height: 280px;
            object-fit: cover;
            border-radius: 8px;
        }

        .card-title {
            font-size: 22px;
            font-weight: 700;
            height: 55px;
            overflow: hidden;
            color: #FFFFFF;
        }

        .card-text {
            font-size: 16px;
            height: 65px;
            overflow: hidden;
            color: #B0B0B0;
        }

        .card-price {
            font-size: 20px;
            font-weight: 600;
        }

        .card-price-original {
            color: #FF4C4C;
            text-decoration: line-through;
            margin-right: 10px;
        }

        .card-price-discounted {
            color: #4CAF50;
            font-weight: bold;
        }

        .discount-badge {
            background: linear-gradient(135deg, #FF4C4C, #FF9800);
            color: #FFFFFF;
            font-size: 14px;
            font-weight: bold;
            padding: 6px 12px;
            border-radius: 8px;
            text-align: center;
            display: inline-block;
            box-shadow: 0 4px 10px rgba(255, 76, 76, 0.3);
            opacity: 0.9;
            transition: opacity 0.3s ease-in-out;
        }

        .discount-badge:hover {
            opacity: 1;
        }


        .card-button {
            background: linear-gradient(135deg, #FFC107 0%, #FF9800 100%);
            color: #000000;
            padding: 12px 18px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .card-button:hover {
            background: linear-gradient(135deg, #e0a800 0%, #ff9100 100%);
            transform: scale(1.05);
        }

        .card-body {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            gap: 10px;
        }


        .custom-strike {
            text-decoration-color: red;
            text-decoration-thickness: 2px;
        }

        .modal-custom-size {
            max-width: 80%;
            height: 90vh;
            margin: auto;
            margin-top: 5vh;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(10px);
            box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .modal-content {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .modal-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #aaa transparent;
        }

        .table-container {
            max-height: 60vh;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #666 #333;
        }



        .price-container {
            display: flex;
            justify-content: space-evenly;
            align-items: center;
        }
    </style>

</head>

<body style="background-color: white;">

    <h1 class="text-center shadow-lg text-white bg-dark fs-1">
        <marquee behavior="scroll" direction="left" scrollAmount="30">Techno BaZzzar â€“ A Dynamic E-Commerce Card System! ðŸ›’</marquee>

    </h1>
    <div class="container">


        <!-- All Cards in That -->


        <div class="w-100 d-flex justify-content-center mb-3">
            <button type="button" class="btn btn-primary fw-bold  form-control fs-2" style="width: 60%;"
                onclick="PrintDataInModal();" data-bs-toggle="modal" data-bs-target="#AddtoCart">
                View Cart <i class="bi bi-cart-fill text-warning"></i>
            </button>

        </div>

        <!-- Modal -->
        <div class="modal fade" id="AddtoCart" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-custom-size">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-3 text-center mx-auto" id="exampleModalLabel">Shopping Cart</h1>
                        <button type="button" class="btn-close mx-0" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="table-container">
                            <table class="table table-light table-striped text-center">
                                <thead>
                                    <tr>
                                        <th scope="col">Product</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Quantity</th>
                                        <th scope="col">Total</th>
                                        <th scope="col">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="table-body"></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer d-flex justify-content-between">
                        <h4 id="Grand-total" class="fw-bold m-0 text-center"></h4>
                        <div>
                            <button type="button" class="btn btn-success fs-5" onclick="Confirm();">Confirm</button>
                            <button type="button" class="btn btn-danger fs-5" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" id="card_container">

        </div>





    </div>

    <script>
        const products = [
            // Smartphones (10)
            { id: 1, name: "iPhone 14", price: 69999, image: "...", description: "A15 Bionic Chip, Super Retina Display." },
            { id: 2, name: "Samsung Galaxy S23", price: 79999, image: "...", description: "Snapdragon 8 Gen 2, 50MP Triple Camera." },
            { id: 3, name: "OnePlus 11 5G", price: 64999, image: "...", description: "Snapdragon 8 Gen 2, Hasselblad Camera." },
            { id: 4, name: "Google Pixel 7", price: 59999, image: "...", description: "Google Tensor G2, 50MP Camera." },
            { id: 5, name: "Realme GT Neo 3", price: 36999, image: "...", description: "Dimensity 8100, 150W Charging." },
            { id: 6, name: "Xiaomi 13 Pro", price: 79999, image: "...", description: "Leica Camera, Snapdragon 8 Gen 2." },
            { id: 7, name: "Vivo X90 Pro", price: 78999, image: "...", description: "Zeiss Optics, Dimensity 9200." },
            { id: 8, name: "Oppo Reno 8 Pro", price: 45999, image: "...", description: "MariSilicon X, 80W Fast Charging." },
            { id: 9, name: "Asus ROG Phone 7", price: 99999, image: "...", description: "Snapdragon 8 Gen 2, 165Hz AMOLED." },
            { id: 10, name: "Nothing Phone 2", price: 49999, image: "...", description: "Glyph Interface, Snapdragon 8+ Gen 1." },

            // Laptops (5)
            { id: 11, name: "MacBook Air M2", price: 99999, image: "...", description: "Apple M2 Chip, 13.6-inch Retina Display." },
            { id: 12, name: "Dell XPS 13", price: 124999, image: "...", description: "Intel i7 12th Gen, 16GB RAM." },
            { id: 13, name: "HP Spectre x360", price: 114999, image: "...", description: "OLED Touch Display, 1TB SSD." },
            { id: 14, name: "Asus ROG Strix G15", price: 89999, image: "...", description: "AMD Ryzen 9, RTX 3070." },
            { id: 15, name: "Lenovo Legion 5", price: 84999, image: "...", description: "AMD Ryzen 7, 16GB RAM." },

            // Tablets (3)
            { id: 16, name: "iPad Air 5", price: 59999, image: "...", description: "M1 Chip, 10.9-inch Liquid Retina Display." },
            { id: 17, name: "Samsung Galaxy Tab S8", price: 79999, image: "...", description: "Snapdragon 8 Gen 1, 120Hz AMOLED." },
            { id: 18, name: "Lenovo Tab P11 Pro", price: 42999, image: "...", description: "OLED Display, Snapdragon 730G." },

            // Headphones (3)
            { id: 19, name: "Sony WH-1000XM4", price: 24999, image: "...", description: "Industry-leading Noise Cancellation." },
            { id: 20, name: "Bose QuietComfort 45", price: 29999, image: "...", description: "World-class noise cancellation, 24-hour battery life." },
            { id: 21, name: "AirPods Pro 2", price: 26999, image: "...", description: "Active Noise Cancellation, Spatial Audio." },

            // Smartwatches (3)
            { id: 22, name: "Apple Watch Series 8", price: 45999, image: "...", description: "Blood Oxygen & ECG Apps." },
            { id: 23, name: "Samsung Galaxy Watch 5", price: 34999, image: "...", description: "Wear OS, Body Composition Analysis." },
            { id: 24, name: "Garmin Fenix 7", price: 79999, image: "...", description: "Advanced GPS, Solar Charging." },

            // Accessories (6)
            { id: 25, name: "Logitech MX Master 3", price: 9999, image: "...", description: "Ergonomic wireless mouse with MagSpeed scroll." },
            { id: 26, name: "Anker PowerCore 20,000mAh", price: 3999, image: "...", description: "Fast charging, USB-C input/output." },
            { id: 27, name: "Sony SRS-XB33 Speaker", price: 13999, image: "...", description: "EXTRA BASS, Waterproof, 24hr Battery Life." },
            { id: 28, name: "JBL PartyBox 310", price: 35999, image: "...", description: "240W Powerful Sound with Light Effects." },
            { id: 29, name: "Razer BlackWidow V4", price: 14999, image: "...", description: "Mechanical Gaming Keyboard, RGB Lighting." },
            { id: 30, name: "Samsung 2TB SSD", price: 24999, image: "...", description: "NVMe Gen 4, Ultra-fast speeds." }
        ];

        window.onload = async () => {
            LoadCart();
            // console.log("Window loaded. Starting to update product images...");
            await updateProductImages();
            // console.log("Product images updated. Showing all cards...");
            ShowAllCards();
        };


        let row = "";
        const ShowAllCards = async () => {

            let row = products.map((product, index) => {
                let discounted_price = product.price * 0.7;
                // console.log(product);

                return `
                        <div class="col-md-6 col-lg-4 my-3">
                            <div class="card h-100 text-center shadow-lg bg-dark text-light">
                                <img src="${product.image && product.image !== '...' ? product.image : 'https://pngimg.com/uploads/phone/phone_PNG49015.png'}" 
                                class="card-img-top  rounded-3 " 
                                alt="${product.name} photo">
                                <div class="card-body">
                                    <h5 class="card-title mb-0 fs-3" >${product.name}</h5>
                                    <p class="card-text mb-0 fs-5">${product.description}</p>
                                    <div class="price-container card-price">
                                        <p class="card-price-original">â‚¹ ${product.price}</p>
                                        <p class="card-price-discounted "> â‚¹${Math.floor(discounted_price)}</p>
                                        <p class="discount-badge">30% OFF</p>
                                    </div>
                                    <button class="mt-auto card-button " onclick="AddProduct(${product.id});">Add to Cart</button>
                                </div>
                            </div>
                        </div>`;
            }).join("");


            document.getElementById('card_container').innerHTML = row;
        }

        const updateProductImages = async () => {
            // console.log("Starting to update product images...");
            for (let product of products) {
                if (product.image === "...") {
                    // console.log(`Fetching image for product: ${product.name}`);
                    product.image = await getUnsplashImage(product.name);
                    // console.log(`Fetched image URL for ${product.name}: ${product.image}`);
                }
            }
            // console.log("Finished updating product images.");
            ShowAllCards(products);
        };

        let product_to_cart_array = [];

        function AddProduct(id) {
            let existingProduct = product_to_cart_array.find(p => p.id === id);

            if (existingProduct) {
                existingProduct.quantity += 1;
            } else {
                let product_to_cart = products.find(product => product.id === id);
                if (product_to_cart) {
                    product_to_cart_array.push({ ...product_to_cart, quantity: 1 });
                }
            }
            PrintDataInModal();
            SaveCart();
        }

        function RemoveFromCart(id) {
            let idx = product_to_cart_array.findIndex(p => p.id === id);

            if (idx !== -1) {
                if (product_to_cart_array[idx].quantity > 1) {
                    product_to_cart_array[idx].quantity -= 1;
                } else {
                    product_to_cart_array.splice(idx, 1);
                }
            }
            PrintDataInModal();
            SaveCart();
        }

        function IncreaseQuantity(id) {
            let product = product_to_cart_array.find(p => p.id === id);
            if (product) {
                product.quantity += 1;
                PrintDataInModal();
                SaveCart();
            }
            SaveCart();
        }

        function DecreaseQuantity(id) {
            let product = product_to_cart_array.find(p => p.id === id);
            if (product) {
                if (product.quantity > 1) {
                    product.quantity -= 1;
                } else {
                    RemoveFromCart(id);
                    SaveCart();
                }
                PrintDataInModal();
                SaveCart();
            }
        }

        function PrintDataInModal() {
            let total_price = 0;

            let row = product_to_cart_array.map((product) => {
                let total = Math.floor(product.price * 0.7) * product.quantity;
                total_price += total;

                return `<tr>
                    <td>${product.name}</td>    
                    <td>&#x20b9; ${Math.floor(product.price * 0.7)}</td>    
                    <td class="text-center">
                        <div class="d-inline-flex align-items-center gap-2">
                            <button type="button" class="btn btn-sm btn-dark" onclick="DecreaseQuantity(${product.id})">-</button>
                            <span>${product.quantity}</span>
                            <button type="button" class="btn btn-sm btn-dark" onclick="IncreaseQuantity(${product.id})">+</button>
                        </div>
                    </td>

                    <td>&#x20b9; ${total}</td>
                    <td><button type="button" onclick="RemoveFromCart(${product.id});" class="btn btn-danger">Remove</button></td>
                </tr> `
            }).join("");

            document.getElementById('table-body').innerHTML = row;
            document.getElementById('Grand-total').innerHTML = `<p class="text-end text-center fs-1">Grand Total: &#x20b9; ${total_price} </p>`;
        }


        const UNSPLASH_ACCESS_KEY = "-viU6BTk7fRD9mpC1GLoKokHVLhJCNGOjM3v_00JtCY";

        const getUnsplashImage = async (query) => {
            try {
                // console.log(`Fetching image from Unsplash for query: ${query}`);
                const response = await fetch(`https://api.unsplash.com/search/photos?query=${query}&client_id=${UNSPLASH_ACCESS_KEY}&per_page=10`);

                if (!response.ok) {
                    throw new Error(`HTTP Error! Status: ${response.status}`);
                }

                const data = await response.json();
                // console.log("Unsplash API Response:", data);

                if (data.results && data.results.length > 0) {
                    const randomIndex = Math.floor(Math.random() * data.results.length);
                    const imageUrl = data.results[randomIndex]?.urls?.small;

                    return imageUrl || "https://via.placeholder.com/400x300?text=Image+Unavailable";
                } else {
                    return "https://via.placeholder.com/400x300?text=No+Image+Found";
                }
            } catch (error) {
                console.error("Error fetching image:", error);
                return "https://via.placeholder.com/400x300?text=Error+Fetching+Image";
            }
        };

        //sweet aleart

        const Confirm = () => {
            Swal.fire({
                title: "Ruko Jara!",
                text: "Sabar Karo!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonText: "OK",
                cancelButtonText: "Cancel"
            }).then((result) => {
                if (result.isConfirmed) {
                    console.log("User confirmed");
                } else {
                    console.log("User canceled");
                }
            });
        };


        //forlocal storage

        function SaveCart() {
            localStorage.setItem("cart", JSON.stringify(product_to_cart_array));
        }

        function LoadCart() {
            let storedCart = localStorage.getItem("cart");
            if (storedCart) {
                product_to_cart_array = JSON.parse(storedCart);
                PrintDataInModal();
            }
        }




    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <!-- sweetaleart  -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>